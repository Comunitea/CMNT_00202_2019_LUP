<?xml version="1.0"?>
<odoo>

    <!-- ADD cost sheet and sale to project -->
    <record id="mrp_production_form_cost_sheet" model="ir.ui.view">
        <field name="name">mrp_production.form.cost.sheet</field>
        <field name="model">mrp.production</field>
        <field name="inherit_id" ref="mrp.mrp_production_form_view"/>
        <field name="arch" type="xml">
            <header position="inside">
               <button name="%(action_quality_wizard)d" type="action" context="{'mode': 'ok_tech'}" string="OK TECH" attrs="{'invisible': ['|', ('state', '!=', 'done'), ('ok_tech', '=', True)]}"/>
               <button name="%(action_quality_wizard)d" type="action" context="{'mode': 'ok_quality'}" string="OK QUALITY" attrs="{'invisible': ['|', '|', ('state', '!=', 'done'), ('ok_tech', '=', False), ('ok_quality', '=', True)]}"/>
               <button name="block_stock" string="block" type="object"/>
            </header>

            <field name="product_id" position="after">
                <field name="sheet_id" context="{'form_view_ref': 'cost_sheet_lupeon.simple_cost_sheet_view_form'}" />
                <field name="sheet_type"/>
                <field name="sale_id"/>
                <field name="sale_line_id"/>
                <field name="line_ref"/>
                <field name="line_name"/>
            </field>

             <field name="company_id" position="after">
                <field name="ok_tech"/>
                <field name="no_ok_tech"/>
                <field name="ok_quality"/>
                <field name="no_ok_quality"/>
                <field name="origin_production_id"/>
                <field name="qty_produced"/>
            </field>

            <notebook position="inside">
                <page string="Repeated Producions">
                    <group string="Repeated productions">
                        <field name="repeated_production_ids" nolabel="1">
                            <tree>
                                <field name="name"/>
                                <field name="product_qty"/>
                                <field name="state"/>
                            </tree>
                        </field>
                    </group>
                </page>
            </notebook>
            
        </field>
    </record>

    <record id="mrp_production_tree_cost_sheet" model="ir.ui.view">
        <field name="name">mrp_production.tree.cost.sheet</field>
        <field name="model">mrp.production</field>
        <field name="inherit_id" ref="mrp.mrp_production_tree_view"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <field name="sheet_id"/>
                <field name="sheet_type"/>
                <field name="sale_id"/>
                <field name="sale_line_id"/>
                <field name="line_ref"/>
                <field name="line_name"/>
            </field>

             <field name="state" position="after">
                <field name="ok_tech"/>
                <field name="no_ok_tech"/>
                <field name="ok_quality"/>
                <field name="no_ok_quality"/>
                <field name="qty_produced"/>
            </field>
            
        </field>
    </record>

    <!-- solo si lo hago store -->
    <record id="mrp_production_search_cost_sheet" model="ir.ui.view">
        <field name="name">mrp_production.search.cost.sheet</field>
        <field name="model">mrp.production</field>
        <field name="inherit_id" ref="mrp.view_mrp_production_filter"/>
        <field name="arch" type="xml">
            <field name="name" position="before">
                <field name="line_ref"/>
                <field name="line_name"/>
                <field name="sheet_id"/>
                <field name="sale_id"/>
                <field name="sale_line_id"/>
            </field>
            <filter name="product" position="after">
                <filter name="sheet" string="Cost Sheet" context="{'group_by': 'sheet_id'}"/>
                <filter name="sale" string="Sale order" context="{'group_by' :'sale_id'}"/>
                <filter name="sale_line" string="Sale order line" context="{'group_by' :'sale_line_id'}"/>
            </filter>
        </field>
    </record>


</odoo>

